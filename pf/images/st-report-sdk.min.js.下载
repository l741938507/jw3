!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("StReportSdk",[],t):"object"==typeof exports?exports.StReportSdk=t():e.StReportSdk=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.__esModule=!0;var o=r(1),i=r(4),u=r(5),c=function(){function e(e){var t=void 0===e?{}:e,r=t.disableGetRequireQsFromUrl,n=void 0!==r&&r,o=t.qsWhiteList,i=void 0===o?[]:o,u=t.apiAddress,c=t.projectIdentifier,a=t.debug,s=void 0!==a&&a;this.disableGetRequireQsFromUrl=n,this.qsWhiteList=i,this.apiAddress=u,this.projectIdentifier=c,this.debug=s}return e.getDefaultInstance=function(t,r){return e.defaultInstance||(e.defaultInstance=new e({qsWhiteList:["utm_source","utm_medium","utm_term","utm_content","utm_campaign"],apiAddress:"//st.xoyo.com/report/web",projectIdentifier:t,debug:r})),e.defaultInstance},e.getPageViewId=function(){var t=e.pageViewCache.uid;return t||(e.pageViewCache={currentUrl:location.href,uid:u()}),e.pageViewCache.uid},e.prototype.report=function(t){var r=void 0===t?{}:t,o=r.projectIdentifier,i=r.eventName,u=r.eventGroup,c=r.eventDescription,a=r.eventDataValue,s=r.eventTags,f=void 0===s?[]:s,d=this.disableGetRequireQsFromUrl?{}:this.getWhiteListLocationSearchObject(),p=this.apiAddress,l=o||this.projectIdentifier,y=u,v=c,g=a,h=i,m=f,b=e.getPageViewId(),w={p:l,ev_g:y,ev_desc:v,ev_d:g,ev_n:h,ev_tag:m,pv_id:b},j=e.convertObjectToRequestParams(n(w,d)),x=p+"?"+encodeURIComponent(j);this.debugLog("report custom request params: ",w),this.debugLog("report white list location search object: ",d),this.debugLog("report request params: ",j),this.debugLog("report api address: ",p),this.debugLog("report final request url: ",x),e.reportRequest(x)},e.prototype.trackClick=function(e,t){this.report({eventName:e,eventDataValue:t})},e.prototype.trackPageLoad=function(){var e=this;i["default"]("load",function(){return e.report()})},e.prototype.trackPageRoute=function(){var e=this,t=window.history&&window.history.pushState;t?i["default"]("popstate",function(){return e.report()}):i["default"]("hashchange",function(){return e.report()})},e.prototype.getWhiteListLocationSearchObject=function(){var t=this.qsWhiteList,r=e.getLocationSearchObject();return Object.keys(r).reduce(function(e,n){return t.indexOf(n)>-1&&(e[n]=r[n]),e},{})},e.prototype.debugLog=function(e,t){this.debug&&console.log("st-report-sdk: "+e,t)},e.getLocationSearchObject=function(){return o.parse(location.search)},e.convertObjectToRequestParams=function(e){return JSON.stringify(e)},e.reportRequest=function(e){(new Image).src=e},e.pageViewCache={},e}();e.exports=e.exports["default"]=c},function(e,t,r){"use strict";function n(e){switch(e.arrayFormat){case"index":return function(t,r,n){return null===r?[i(t,e),"[",n,"]"].join(""):[i(t,e),"[",i(n,e),"]=",i(r,e)].join("")};case"bracket":return function(t,r){return null===r?[i(t,e),"[]"].join(""):[i(t,e),"[]=",i(r,e)].join("")};default:return function(t,r){return null===r?i(t,e):[i(t,e),"=",i(r,e)].join("")}}}function o(e){var t;switch(e.arrayFormat){case"index":return function(e,r,n){return t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),void(n[e][t[1]]=r)):void(n[e]=r)};case"bracket":return function(e,r,n){return t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0===n[e]?void(n[e]=[r]):void(n[e]=[].concat(n[e],r)):void(n[e]=r)};default:return function(e,t,r){return void 0===r[e]?void(r[e]=t):void(r[e]=[].concat(r[e],t))}}}function i(e,t){return t.encode?t.strict?p(e):encodeURIComponent(e):e}function u(e,t){return t.decode?l(e):e}function c(e){return Array.isArray(e)?e.sort():"object"===("undefined"==typeof e?"undefined":d(e))?c(Object.keys(e)).sort(function(e,t){return Number(e)-Number(t)}).map(function(t){return e[t]}):e}function a(e){var t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function s(e,t){t=f({decode:!0,arrayFormat:"none"},t);var r=o(t),n=Object.create(null);if("string"!=typeof e)return n;if(e=e.trim().replace(/^[?#&]/,""),!e)return n;for(var i=0,a=e.split("&");i<a.length;i++){var s=a[i],p=s.replace(/\+/g," ").split("="),l=p[0],y=p[1];y=void 0===y?null:u(y,t),r(u(l,t),y,n)}return Object.keys(n).sort().reduce(function(e,t){var r=n[t];return Boolean(r)&&"object"===("undefined"==typeof r?"undefined":d(r))&&!Array.isArray(r)?e[t]=c(r):e[t]=r,e},Object.create(null))}var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=r(2),l=r(3);t.extract=a,t.parse=s,t.stringify=function(e,t){var r={encode:!0,strict:!0,arrayFormat:"none"};t=f(r,t),t.sort===!1&&(t.sort=function(){});var o=n(t);return e?Object.keys(e).sort(t.sort).map(function(r){var n=e[r];if(void 0===n)return"";if(null===n)return i(r,t);if(Array.isArray(n)){for(var u=[],c=0,a=n.slice();c<a.length;c++){var s=a[c];void 0!==s&&u.push(o(r,s,u.length))}return u.join("&")}return i(r,t)+"="+i(n,t)}).filter(function(e){return e.length>0}).join("&"):""},t.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:s(a(e),t)}}},function(e,t){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t){"use strict";function r(e,t){try{return decodeURIComponent(e.join(""))}catch(n){}if(1===e.length)return e;t=t||1;var o=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],r(o),r(i))}function n(e){try{return decodeURIComponent(e)}catch(t){for(var n=e.match(c),o=1;o<n.length;o++)e=r(n,o).join(""),n=e.match(c);return e}}function o(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=a.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(o){var i=n(r[0]);i!==r[0]&&(t[r[0]]=i)}r=a.exec(e)}t["%C2"]="�";for(var u=Object.keys(t),c=0;c<u.length;c++){var s=u[c];e=e.replace(new RegExp(s,"g"),t[s])}return e}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u="%[a-f0-9]{2}",c=new RegExp(u,"gi"),a=new RegExp("("+u+")+","gi");e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+("undefined"==typeof e?"undefined":i(e))+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return o(e)}}},function(e,t){"use strict";function r(e,t){window.attachEvent?(window["e"+e+t]=t,window[e+t]=function(){window["e"+e+t](window.event)},window.attachEvent("on"+e,window[e+t])):window.addEventListener(e,t,!1)}t.__esModule=!0,t["default"]=r},function(e,t,r){"use strict";function n(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var u=e.random||(e.rng||o)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,t)for(var c=0;c<16;++c)t[n+c]=u[c];return t||i(u)}var o=r(6),i=r(7);e.exports=n},function(e,t){"use strict";var r="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){"use strict";function r(e,t){var r=t||0,o=n;return o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]}for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);e.exports=r}])});
//# sourceMappingURL=st-report-sdk.min.js.map